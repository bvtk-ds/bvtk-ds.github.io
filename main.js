!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";r.r(t),r.d(t,"login",(function(){return i})),r.d(t,"isLoggedIn",(function(){return a})),r.d(t,"getUserToken",(function(){return o})),r.d(t,"getAppKey",(function(){return l})),r.d(t,"checkAppKey",(function(){return c}));var n=r(6);const s=document.Trello;function i(e,t){Trello.authorize({type:"popup",name:"Big Screen Trello Kanban",scope:{read:"true",write:"true",account:"false"},success:e,error:t,expiration:"never"})}function a(){return s.authorized()}function o(){return window.localStorage.trello_token}function c(){l()||Object(n.setItem)("BTK_Key","7b8b799d61050cff6e7bef50e382a852")}function l(){return Object(n.getItem)("BTK_Key")}},function(e,t,r){"use strict";r.r(t);const n={INVALID:-1,BACKLOG:0,TODO:1,INPROGRESS:2,COMPLETE:3,REJECTED:4};Object.freeze(n),t.default=n},function(e,t,r){"use strict";function n(e,t){return"string"==typeof e&&"string"==typeof t?0===e.localeCompare(t,void 0,{sensitivity:"accent"}):e===t}r.r(t),r.d(t,"EqualCI",(function(){return n}))},function(e,t,r){"use strict";r.r(t);class n extends HTMLElement{constructor(){super(),this._children={},this.addChild=this._addChild,this.getChild=this._getChild}_addChild(e,t){return this._children[e]=t}_getChild(e){return this._children[e]}}t.default=n},function(e,t,r){"use strict";r.r(t);var n=r(7);class s{constructor(e){e&&("string"==typeof e&&(e=JSON.parse(e)),this.avatar=e.avatarUrl,this.avatarHash=e.avatarHash,this.id=e.id,this.name=e.fullName,this.url=e.url,this.username=e.username)}static copyTo(e){let t=null;return e&&(t=new s,Object.assign(t,e)),t}getAvatar(){return void 0!==this.avatar&&this.avatar?this.getCustomAvatar():this.getGravatar(80)}getCustomAvatar(){return this.avatar+"/"+n.default[0]+".png"}getGravatar(e){e=e||80;return"http://www.gravatar.com/avatar/"+this.avatarHash+".jpg?s="+e}}t.default=s},function(e,t,r){"use strict";r.r(t),r.d(t,"getSelfUserAndBoards",(function(){return C})),r.d(t,"setupRefresh",(function(){return E}));var n=r(4),s=r(8),i=r(9),a=r(1),o=r(0),c=r(2),l={},d=[],u=[],h=[],f=[],m=[],p=[],b=[];function g(){O(),fetch("https://api.trello.com/1/batch?urls=/members/me/boards&key="+Object(o.getAppKey)()+"&token="+Object(o.getUserToken)(),{method:"GET"}).then(e=>e.text()).then(v).catch(y)}function v(e){let t=(e=JSON.parse(e))[0];const r=Object.getOwnPropertyNames(t)[0];"200"===r?I(t[r]):x(t[r])}function y(e){console.error(e)}function C(){O(),fetch("https://api.trello.com/1/batch?urls=/members/me,/members/me/boards&key="+Object(o.getAppKey)()+"&token="+Object(o.getUserToken)(),{method:"GET"}).then(e=>e.text()).then(w).catch(k)}function O(){h=[],f=[],m=[],p=[],b=[],d=[],u=[]}function E(){window.setInterval(g,3e5)}function w(e){let t=(e=JSON.parse(e))[0];const r=Object.getOwnPropertyNames(t)[0];let n=e[1];const s=Object.getOwnPropertyNames(n)[0];"200"===r?A(t[r]):T(t[r]),"200"===s?I(n[s]):x(n[s])}function k(e){console.error(e)}function A(e){!function(e){l=new n.default(e)}(e),document.getElementById("trusername").innerText=l.name,document.getElementById("travatar").src=l.getAvatar()}function T(e){console.error(e)}function I(e){var t;!function(e){"string"==typeof e&&(e=JSON.parse(e));e.forEach((function(e){d.push(new s.default(e))}))}(e),u=[],d.forEach((function(e){!0!==e.closed&&function(e,t){return!(!0===e&&!0===t.enterpriseOwned)}(t,e)&&function(e){if(window.inclusionFilter)return!0;let t=!1;if(window.exclusionFilter)for(let r=0;r<window.exclusionFilter.length;r++)if(console.log(window.exclusionFilter[r]+" - "+e.name),Object(c.EqualCI)(window.exclusionFilter[r],e.name)){t=!0;break}return!t}(e)&&(u.push(e),function(e){var t;void 0!==(t=e)&&t&&fetch("https://api.trello.com/1/boards/"+t.id+"/cards?members=true&member_fields=avatarHash,avatarUrl,username&key="+Object(o.getAppKey)()+"&token="+Object(o.getUserToken)(),{method:"GET"}).then(e=>e.text()).then(j).catch(N)}(e))}))}function x(e){console.error(e)}function j(e){var t;!function(e){var t=e;"string"==typeof t&&(t=JSON.parse(t));if(void 0===t||!t.length)return;r=t[0].idBoard,n=null,u.forEach((function(e){if(e.id==r)return n=e,e})),n,t.forEach((function(e){h.push(new i.default(e))}));var r,n}(e),f=[],m=[],p=[],b=[],h.forEach((function(e){switch(e.taskType){case a.default.BACKLOG:f.push(e);break;case a.default.TODO:m.push(e);break;case a.default.INPROGRESS:p.push(e);break;case a.default.COMPLETE:b.push(e)}})),S(t=document.getElementById("backlog-cards")),M(f,t),function(){const e=document.getElementById("to-do-cards");S(e),M(m,e)}(),function(){const e=document.getElementById("progress-cards");S(e),M(p,e)}(),function(){const e=document.getElementById("complete-cards");S(e),M(b,e)}()}function N(e){console.error(e)}function S(e){if(e)for(;e.lastElementChild;)e.removeChild(e.lastElementChild)}function M(e,t){t&&e.forEach((function(e){var r=document.createElement("task-card");r.setAttribute("card-name",e.name),r.setAttribute("assigned-members",JSON.stringify(e.getMembers()));var n=t.insertRow();n.setAttribute("class","trello-card"),n.appendChild(r)}))}},function(e,t,r){"use strict";function n(e){return window.sessionStorage.getItem(e)}function s(e,t){window.sessionStorage.setItem(e,t)}r.r(t),r.d(t,"getItem",(function(){return n})),r.d(t,"setItem",(function(){return s}))},function(e,t,r){"use strict";r.r(t);const n=["original","30","50","170"];Object.freeze(n),t.default=n},function(e,t,r){"use strict";r.r(t);t.default=class{constructor(e){"string"==typeof e&&(e=JSON.parse(e)),this.closed=e.closed,this.enterpriseOwned=e.enterpriseOwned,this.id=e.id,this.name=e.name,this.url=e.url,this.labels=e.labelsNames,this.memberships=e.memberships}}},function(e,t,r){"use strict";r.r(t);var n=r(4),s=r(1);t.default=class{constructor(e){if("string"==typeof e&&(e=JSON.parse(e)),this.members=[],this.closed=e.closed,this.description=e.desc,this.id=e.id,this.name=e.name,this.url=e.url,this.listId=e.idList,this.labels=e.labels,this.idMembers=e.idMembers,this.cardMembers=[],void 0!==e.members){var t=[];e.members.forEach((function(e){t.push(new n.default(e))})),this.cardMembers=t}if(this.taskType=s.default.INVALID,this.labels.length)for(var r=0;r<this.labels.length&&(this.taskType=this.determineTaskType(this.labels[r]),this.taskType==s.default.INVALID);r++);}getMembers(){return this.cardMembers}mapMembers(e){this.members=[],this.idMembers.forEach((function(t){var r=e[t];void 0!==r&&r&&this.members.push(r)}))}determineTaskType(e){var t=s.default.INVALID;switch(e.color){case"black":t=s.default.BACKLOG;break;case"yellow":t=s.default.TODO;break;case"lime":t=s.default.INPROGRESS;break;case"green":t=s.default.COMPLETE;break;default:t=s.default.INVALID}return t}}},function(e,t,r){r(7),r(1),r(3),r(11),r(12),r(13),r(5),r(2),r(14),r(0),r(6),r(8),r(9),e.exports=r(4)},function(e,t,r){"use strict";r.r(t);var n=r(3),s=r(4);class i extends n.default{constructor(){super();var e=this.addChild("card-body",document.createElement("div"));e.setAttribute("class","trello-card-data");var t=this.addChild("task-text",document.createElement("div"));t.setAttribute("class","trello-task-text"),t.innerText="N/A";var r=this.addChild("task-members",document.createElement("div"));r.setAttribute("class","trello-card-members"),e.appendChild(t),e.appendChild(r)}connectedCallback(){var e=this.getChild("card-body"),t=this.getChild("task-text");this.hasAttribute("card-name")&&(t.innerText=this.getAttribute("card-name")),this.getMemberAvatars(),this.appendChild(e)}getMemberAvatars(){var e=this.getChild("task-members");if(e.innerText="",this.hasAttribute("assigned-members")){var t=this.getAttribute("assigned-members");(t=JSON.parse(t))&&t.forEach((function(t){if(t){let n=s.default.copyTo(t);var r=document.createElement("img");r.setAttribute("class","trello-avatar"),r.setAttribute("src",n.getAvatar()),r.setAttribute("alt",n.getGravatar()),e.appendChild(r)}}))}}static get observeredAttributes(){return["card-name","assigned-members"]}attributeChangedCalled(e,t,r){switch(e){case"card-name":this.getChild("task-text").innerText=r}}}customElements.define("task-card",i)},function(e,t,r){"use strict";r.r(t);var n=r(3);class s extends n.default{constructor(){super();var e=this.addChild("header-element",document.createElement("div"));e.className="task-header",e.innerText="No Header";var t=this.addChild("task-display",document.createElement("div"));t.className="task-display";var r=this.addChild("task-table",document.createElement("table"));r.className="task-table",t.appendChild(r)}static get observeredAttributes(){return["header","header-id"]}attributeChangedCalled(e,t,r){switch(e){case"header":this.getChild("header-element").innerText=r;break;case"header-id":this.getChild("header-element").id=r}}connectedCallback(){let e="No Name";1==this.hasAttribute("header")&&(e=this.getAttribute("header"));let t="";1==this.hasAttribute("id")&&(t=this.getAttribute("id")+"-header");let r=this.getChild("header-element");r.innerText=e,r.id=t;var n="card-generic";1==this.hasAttribute("task-id")&&(n=this.getAttribute("task-id")),this.getChild("task-table").id=n,this.appendChild(r),this.appendChild(this.getChild("task-display"))}}customElements.define("task-col",s)},function(e,t,r){"use strict";r.r(t);var n=r(3);class s extends n.default{constructor(e){super();var t=this.addChild("pop-up",document.createElement("div"));t.setAttribute("class","trello-auth-popup");var r=this.addChild("inner-pop-up",document.createElement("div"));r.setAttribute("class","trello-inner-popup");var n=this.addChild("body-pop-up",document.createElement("div"));n.setAttribute("class","trello-body-popup"),n.innerHTML=e,r.appendChild(n),t.appendChild(r)}connectedCallback(){var e=this.getChild("pop-up");this.appendChild(e)}}customElements.define("auth-pop",s),t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(5),s=r(0),i=r(2);const a=window.location.search;function o(e,t){Object(i.EqualCI)(e,"columns")?function(e){var t=[];if("string"==typeof e)t=e.split(",");else{if("array"!=typeof e)return;t=e}let r=document.documentElement;for(let e=0;e<t.length;e++){let r="column-"+t[e],n=document.getElementById(r);n&&n.parentNode.removeChild(n)}let n=Math.max(0,4-t.length);r.style.setProperty("--column-width","calc(100vw / "+n+")")}(t):Object(i.EqualCI)(e,"exclude")?function(e){let t=[];if("string"==typeof e)t=e.split(",");else{if("array"!=typeof e)return;t=e}window.exclusionFilter=t}(t):Object(i.EqualCI)(e,"include")?function(e){let t=[];if("string"==typeof e)t=e.split(",");else{if("array"!=typeof e)return;t=e}window.inclusionFilter=t}(t):Object(i.EqualCI)(e,"ts")&&function(e){let t=1;if(console.log(e),"string"!=typeof e)return;console.log("Text!"),t=parseFloat(e);t+="em",document.documentElement.style.setProperty("--task-text-size",t)}(t)}console.log(a),window.onload=function(){!function(e){console.log(e),"?"===e[0]&&(e=e.replace("?",""));let t=e.split("&");for(let e=0;e<t.length;e++){let r=t[e].split("=");o(r[0],r[1])}}(window.decodeURIComponent(window.location.search))},Object(s.checkAppKey)(),Object(s.login)((function(){Object(n.getSelfUserAndBoards)(),Object(n.setupRefresh)()}),(function(){console.error("Failed to login.")}))}]);